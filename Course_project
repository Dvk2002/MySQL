CREATE DATABASE li_chess;


CREATE TABLE users(
id int  AUTO_INCREMENT PRIMARY KEY,
name varchar(255));


CREATE TABLE profile(
user_id int,
country varchar(256),
location varchar(256),
user_rating int,
email varchar(256) UNIQUE NOT NULL,
created_at datetime DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE games(
id int  AUTO_INCREMENT PRIMARY KEY,
type_game_id int,
white int NOT NULL  comment'user_id',
black int NOT NULL  comment 'user_id',
status_id int,
result_game int UNSIGNED comment '1 - white winner, 0- black winner, 0,5 - draw',
tournament_id int,
start_at datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
finished_at datetime NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE types_game(
id int  AUTO_INCREMENT PRIMARY KEY,
name varchar(256)
);

CREATE TABLE status_game(
id int  AUTO_INCREMENT PRIMARY KEY,
name varchar(256)
);

CREATE TABLE tournaments(
id int  AUTO_INCREMENT PRIMARY KEY,
name varchar (256),
type_game_id int,
club_id int,
start_at datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
finished_at datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
status_id int,
winner_id int);

CREATE TABLE messages (
id int  AUTO_INCREMENT PRIMARY KEY,
from_user_id int,
to_user_id int,
body TEXT (65535),
created_at timestamp DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE clubs(
id int  AUTO_INCREMENT PRIMARY KEY,
name varchar (150),
created_at timestamp DEFAULT CURRENT_TIMESTAMP,
is_closed bool
);

CREATE TABLE clubs_members(
club_id int,
user_id int,
is_admin bool,
is_banned bool
);

CREATE TABLE subscribes (
user_id int not null,
to_user_id int not null
);

CREATE TABLE languages (
id int AUTO_INCREMENT PRIMARY KEY,
name varchar(256)
);


CREATE TABLE trainers (
id int AUTO_INCREMENT PRIMARY KEY,
name varchar(256) NOT NULL,
rating int,
location varchar(256),
speak_language varchar(256),
ratio_for_hour int,
availibility bool
);

CREATE TABLE boards (
id int AUTO_INCREMENT PRIMARY KEY,
name JSON
);


CREATE TABLE figures_types (
id int AUTO_INCREMENT PRIMARY KEY,
name JSON
);


CREATE TABLE theams(
id int AUTO_INCREMENT PRIMARY KEY,
name JSON
);

CREATE TABLE figures (
id int AUTO_INCREMENT PRIMARY KEY,
name varchar(16)
);

CREATE TABLE moves (
game_id int NOT NULL,
move_number int,
user_id int NOT NULL,
figure_id int,
`field` int
);
